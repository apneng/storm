<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ggy.dao.EmpMapper">
	<resultMap type="Emp" id="empBean">
		<id column="empid" property="empid" />
		<result column="ename" property="ename" />
		<result column="egender" property="egender" />
		<result column="eage" property="eage" />
		<result column="ephone" property="ephone" />
		<result column="deptid" property="deptid" />
		<result column="dname" property="dname"/>
	</resultMap>

	<!-- 获取所有雇员 -->
	<select id="showEmps" resultType="java.util.Map">
		select 
		e.empid,e.ename,e.egender,e.eage,e.ephone,e.deptid,
		(SELECT DNAME FROM DEPT WHERE DEPTID = e.deptid) dname from  emp e 
	limit  #{page,jdbcType=INTEGER},#{rows,jdbcType=INTEGER}
	</select>
	<select id="getEmpByEmpid" resultType="com.ggy.pojo.Emp">
		select 
		e.empid,e.ename,e.egender,e.eage,e.ephone,e.deptid,
		(SELECT DNAME FROM DEPT WHERE DEPTID = e.deptid) dname from  emp e 
	where empid = #{empid,jdbcType=INTEGER}
	</select>
	  <delete id="deleteByEmpId" parameterType="java.lang.String">
 
    delete from emp
    where empid = #{empid,jdbcType=VARCHAR}
  </delete>
  
  <insert id="addEmp" parameterType="com.ggy.pojo.Emp">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 05 14:56:59 GMT+08:00 2018.
    -->
    insert into emp (empid, ename, egender, 
      eage, ephone, deptid)
    values (#{empid,jdbcType=VARCHAR}, #{ename,jdbcType=VARCHAR}, #{egender,jdbcType=INTEGER}, 
      #{eage,jdbcType=INTEGER}, #{ephone,jdbcType=VARCHAR}, #{deptid,jdbcType=INTEGER} )
      
  </insert>
  <!-- 修改职员信息 -->
    <update id="updateEmp" parameterType="com.ggy.pojo.Emp" >
   
    update emp
    set 
    	ename = #{ename,jdbcType=VARCHAR},
    	egender = #{egender,jdbcType=INTEGER},
    	eage = #{eage,jdbcType=INTEGER},
    	ephone = #{ephone,jdbcType=VARCHAR},
    	deptid = #{deptid,jdbcType=VARCHAR}
    where empid = #{empid,jdbcType=INTEGER}
  </update>
  <select id="getCountEmp" resultType="java.lang.Integer">
		select count(*) from emp
	</select>
</mapper>  